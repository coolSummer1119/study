<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>상품 구매</title>
<link rel="stylesheet" href="../css/jquery-ui.min.css">
<script type="text/javascript">
window.onloade= function(){
	$('#order_date').datepicker({
		showMonthAfterYear:true,//default 월 연
		dateFormat:'yy-mm-dd',
		dayNamesMin:['일','월','화','수','목','금','토'],
		monthNames:['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월']
	});
	const myForm = document.getElementById('myForm');
	myForm.onsubmit= function(){
		const order_date = document.getElementById('order_date');
		if(order_date.value.trim()=='년-월-일'){
			alert('날짜를 입력해주세요');
			order_date.focus();
			return false;
		}
	}
	//가격정보가 저장된 객체 생성
	const product = {
			c0:200000,
			c1:100000,
			c2:50000,
			c3:150000
	};
	let sum = 0; //총 구매 상품 가격
	let ship = 0; //배송비
	
	const inputs = document.querySelectorAll('input[type="checkbox"]');
	
	//반복문을 이용한 이벤트 연결
	for(let i=0; i<inputs.length; i++){
		inputs[i].onclick=function(){
			if(this.checked){//체크박스 선택시
				sum += product[this.id];
			}else{//체크박스 해제시
				sum -= product[this.id];
			}
			
			//배송비 구하기
			if(sum>0 && sum < 300000){
				ship = 5000;
			}else{
				ship = 0;
			}
			
			//구매비용과 배송비를 화면에 표시
			
		}
	}
};

</script>
</head>
<body>
<%--
이름,배송희망일 필수 입력, 상품은 하나 이상 꼭 선택
[출력예시]
구매 금액이 30만원 미만이면 배송비 5천원 추가
이름: 홍길동
배송희망일:2024-04-23
구입 내용 : 가방, 옷
배송비 : 5,000원
총 구매비용(배송비 포함) : 255,000원 
 --%>
<form action="s08_order.jsp" method="post" id="myForm">
	<ul>
		<li>
			<label for="name">이름</label>
			<input type="text" name="name" id="name">
		</li>	
		<li>
			<label for="order_date">배송희망일</label>
			<input type="date" name="order_date" id="order_date">
		</li>	
		<li>
			<label>상품(30만원)</label>
			<br>
			<input type="checkbox" name="item" value="가방">가방(20만원)
			<input type="checkbox" name="item" value="신발">신발(10만원)
			<input type="checkbox" name="item" value="옷">옷(5만원)
			<input type="checkbox" name="item" value="식사권">식사권(15만원)
		</li>
	</ul>
<input type="submit" value="전송">
</form>

</body>
</html>